  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Parallel Programming</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
  </head>
  <body class="markdown-body">
    <div id="slide-wrap">
        <div class="slide" id="0">
          <h1>Parallel programming</h1>
<h3>How to write performant code <img class="emoji" draggable="false" alt="üöÄ" src="https://twemoji.maxcdn.com/2/svg/1f680.svg"></h3>
<p>By Harmen Stoppels</p>


          <div class="slide-number">0 / 29</div>
        </div>
        <div class="slide" id="1">
          <h1>Contents</h1>
<ul>
<li>Programming &amp; mathematics</li>
<li>Parallellism by example</li>
<li>Conclusions.</li>
</ul>


          <div class="slide-number">1 / 29</div>
        </div>
        <div class="slide" id="2">
          <h1>Programming &amp; math</h1>


          <div class="slide-number">2 / 29</div>
        </div>
        <div class="slide" id="3">
          <img src="languages.svg" width="100%">


          <div class="slide-number">3 / 29</div>
        </div>
        <div class="slide" id="4">
          <h2>FORTRAN</h2>
<pre><code class="language-fortran">X1 = -B + <span class="hljs-built_in">SQRT</span>(B**<span class="hljs-number">2</span> - <span class="hljs-number">4</span>*A*C) / (<span class="hljs-number">2</span> * A);
X2 = -B - <span class="hljs-built_in">SQRT</span>(B**<span class="hljs-number">2</span> - <span class="hljs-number">4</span>*A*C) / (<span class="hljs-number">2</span> * A);
</code></pre>
<h2>Julia</h2>
<pre><code class="language-julia">x‚ÇÅ = -b + ‚àö(b^<span class="hljs-number">2</span> - <span class="hljs-number">4</span>a * c) / <span class="hljs-number">2</span>a
x‚ÇÇ = -b + ‚àö(b^<span class="hljs-number">2</span> - <span class="hljs-number">4</span>a * c) / <span class="hljs-number">2</span>a
</code></pre>


          <div class="slide-number">4 / 29</div>
        </div>
        <div class="slide" id="5">
          <p>A function taking <strong>no arguments</strong> returning <strong>random integers</strong>.</p>
<pre><code class="language-c"><span class="hljs-comment">// Definition</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rand</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">int</span> number = rand();
</code></pre>


          <div class="slide-number">5 / 29</div>
        </div>
        <div class="slide" id="6">
          <pre><code class="language-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">square</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-keyword">print</span> <span class="hljs-string">"Sue me!"</span>
    <span class="hljs-keyword">return</span> n * n
</code></pre>


          <div class="slide-number">6 / 29</div>
        </div>
        <div class="slide" id="7">
          <h2>Haskell</h2>
<pre><code class="language-haskell"><span class="hljs-title">factorial</span> <span class="hljs-number">0</span> = <span class="hljs-number">1</span>
<span class="hljs-title">factorial</span> n = n * factorial (n - <span class="hljs-number">1</span>)
</code></pre>
<h2>C++</h2>
<pre><code class="language-c++"><span class="hljs-function">function <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> n)</span> </span>{
  <span class="hljs-keyword">uint64_t</span> f = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) {
      f *= i;
  }
  <span class="hljs-keyword">return</span> f;
}
</code></pre>


          <div class="slide-number">7 / 29</div>
        </div>
        <div class="slide" id="8">
          <h1>Why parallellism is necessary</h1>
<ul>
<li>Hardware development is beginning to slow</li>
<li>Power consumption grows faster than clock speed</li>
</ul>


          <div class="slide-number">8 / 29</div>
        </div>
        <div class="slide" id="9">
          <h1><img class="emoji" draggable="false" alt="üéí" src="https://twemoji.maxcdn.com/2/svg/1f392.svg"> No free lunch</h1>
<ul>
<li><strong>S</strong>tarvation</li>
<li><strong>L</strong>atency</li>
<li><strong>O</strong>verhead</li>
<li><s><strong>W</strong>aiting for contention</s></li>
</ul>
<p>and ‚Ä¶</p>
<ul>
<li>messy code?</li>
</ul>


          <div class="slide-number">9 / 29</div>
        </div>
        <div class="slide" id="10">
          <h1>Example 1: parallel inner product</h1>


          <div class="slide-number">10 / 29</div>
        </div>
        <div class="slide" id="11">
          <h1>Parallel inner product</h1>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi><mo>=</mo><msubsup><mo>‚àë</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>x</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">z = \sum_{i = 1}^{n} x_i y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.0500099999999999em;vertical-align:-0.30001em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">‚àë</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">n = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span></span> elements and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">p = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mrel">=</span><span class="mord mathrm">3</span></span></span></span> processors</li>
</ul>
<table class="my-table">
  <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
  </tr>
</table>
<table class="my-table">
  <tr>
    <td>5</td>
    <td>2</td>
    <td>1</td>
    <td>6</td>
    <td>4</td>
    <td>8</td>
    <td>4</td>
    <td>0</td>
    <td>1</td>
    <td>3</td>
  </tr>
</table>


          <div class="slide-number">11 / 29</div>
        </div>
        <div class="slide" id="12">
          <h1>Cyclic distribution</h1>
<table class="my-table distributed">
  <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
    <td>9</td>
    <td>10</td>
  </tr>
</table>
<table class="my-table distributed">
  <tr>
    <td>5</td>
    <td>2</td>
    <td>1</td>
    <td>6</td>
    <td>4</td>
    <td>8</td>
    <td>4</td>
    <td>0</td>
    <td>1</td>
    <td>3</td>
  </tr>
</table>
<hr>
<p>Local subproblems:</p>
<div class="columns">
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-1">
      <tr>
        <td>1</td>
        <td>4</td>
        <td>7</td>
        <td>10</td>
      </tr>
    </table>
    <table class="my-table proc-1">
      <tr>
      <td>5</td>
      <td>6</td>
      <td>4</td>
      <td>3</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-2">
      <tr>
        <td>2</td>
        <td>5</td>
        <td>8</td>
      </tr>
    </table>
    <table class="my-table proc-2">
      <tr>
        <td>2</td>
        <td>4</td>
        <td>0</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1;padding: 0 1em;">
    <table class="my-table proc-3">
      <tr>
        <td>3</td>
        <td>6</td>
        <td>9</td>
      </tr>
    </table>
    <table class="my-table proc-3">
      <tr>
        <td>1</td>
        <td>8</td>
        <td>1</td>
      </tr>
    </table>
  </div>
</div>
<hr>
<p>Evaluate inner product.</p>
<div class="columns">
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-1 single-el">
      <tr>
        <td>87</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-2 single-el">
      <tr>
        <td>24</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1;padding: 0 1em;">
    <table class="my-table proc-3 single-el">
      <tr>
        <td>60</td>
      </tr>
    </table>
  </div>
</div>


          <div class="slide-number">12 / 29</div>
        </div>
        <div class="slide" id="13">
          <h1>Communication</h1>
<div class="columns">
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-1 single-el">
      <tr>
        <td>87</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-2 single-el">
      <tr>
        <td>24</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1;padding: 0 1em;">
    <table class="my-table proc-3 single-el">
      <tr>
        <td>60</td>
      </tr>
    </table>
  </div>
</div>
<hr>
<p>Each processor sends its local solution to the others.</p>
<div class="columns">
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table distributed">
      <tr>
        <td>87</td>
        <td>24</td>
        <td>60</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table distributed">
      <tr>
        <td>87</td>
        <td>24</td>
        <td>60</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1;padding: 0 1em;">
    <table class="my-table distributed">
      <tr>
        <td>87</td>
        <td>24</td>
        <td>60</td>
      </tr>
    </table>
  </div>
</div>
<hr>
<p>Done after one last summation.</p>
<div class="columns">
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-1 single-el">
      <tr>
        <td>171</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1; padding: 0 1em;">
    <table class="my-table proc-2 single-el">
      <tr>
        <td>171</td>
      </tr>
    </table>
  </div>
  <div style="flex: 1;padding: 0 1em;">
    <table class="my-table proc-3 single-el">
      <tr>
        <td>171</td>
      </tr>
    </table>
  </div>
</div>


          <div class="slide-number">13 / 29</div>
        </div>
        <div class="slide" id="14">
          <h1>A measure of costs</h1>
<ul>
<li>Components:</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><msub><mi>C</mi><mn>1</mn></msub></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>2</mn><mrow><mo fence="true">‚åà</mo><mfrac><mrow><mi>n</mi></mrow><mrow><mi>p</mi></mrow></mfrac><mo fence="true">‚åâ</mo></mrow><mo>‚àí</mo><mn>1</mn></mrow></mtd><mtd><mrow><mtext><mi mathvariant="normal">(</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">l</mi><mtext>¬†</mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mtext>¬†</mtext><mi mathvariant="normal">p</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">)</mi></mtext></mrow></mtd></mtr><mtr><mtd><mrow><mtext>¬†</mtext></mrow></mtd></mtr><mtr><mtd><mrow><msub><mi>C</mi><mn>2</mn></msub></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mi>p</mi><mo>‚àí</mo><mn>1</mn><mo>)</mo><mi>g</mi></mrow></mtd><mtd><mrow><mtext><mi mathvariant="normal">(</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">)</mi></mtext></mrow></mtd></mtr><mtr><mtd><mrow><mtext>¬†</mtext></mrow></mtd></mtr><mtr><mtd><mrow><msub><mi>C</mi><mn>3</mn></msub></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mi>p</mi><mo>‚àí</mo><mn>1</mn></mrow></mtd><mtd><mrow><mtext><mi mathvariant="normal">(</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">l</mi><mtext>¬†</mtext><mi mathvariant="normal">s</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">)</mi></mtext></mrow></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{aligned}C_1 &amp;= 2\left\lceil \frac{n}{p} \right\rceil - 1 &amp; \text{(local inner product)}\\
~ \\
C_2 &amp;= (p - 1)g &amp; \text{(communication)}\\
~ \\
C_3 &amp;= p - 1 &amp; \text{(local sum)}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:3.850015000000001em;"></span><span class="strut bottom" style="height:7.200030000000001em;vertical-align:-3.350015em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-2.4000150000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:-0.6099850000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mspace">¬†</span></span></span><span style="top:0.5900149999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span></span></span><span style="top:1.7900149999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mspace">¬†</span></span></span><span style="top:2.990015em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-2.4000150000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">‚åà</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6860000000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit">p</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">‚åâ</span></span></span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span><span style="top:0.5900149999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.03588em;">g</span></span></span><span style="top:2.990015em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">‚Äã</span></span>‚Äã</span></span></span><span class="arraycolsep" style="width:2em;"></span><span class="col-align-r"><span class="vlist"><span style="top:-2.4000150000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">(</span><span class="mord mathrm">l</span><span class="mord mathrm">o</span><span class="mord mathrm">c</span><span class="mord mathrm">a</span><span class="mord mathrm">l</span><span class="mord mspace">¬†</span><span class="mord mathrm">i</span><span class="mord mathrm">n</span><span class="mord mathrm">n</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mspace">¬†</span><span class="mord mathrm">p</span><span class="mord mathrm">r</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span><span class="mord mathrm">u</span><span class="mord mathrm">c</span><span class="mord mathrm">t</span><span class="mord mathrm">)</span></span></span></span><span style="top:0.5900149999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">(</span><span class="mord mathrm">c</span><span class="mord mathrm">o</span><span class="mord mathrm">m</span><span class="mord mathrm">m</span><span class="mord mathrm">u</span><span class="mord mathrm">n</span><span class="mord mathrm">i</span><span class="mord mathrm">c</span><span class="mord mathrm">a</span><span class="mord mathrm">t</span><span class="mord mathrm">i</span><span class="mord mathrm">o</span><span class="mord mathrm">n</span><span class="mord mathrm">)</span></span></span></span><span style="top:2.990015em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="mord displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">(</span><span class="mord mathrm">l</span><span class="mord mathrm">o</span><span class="mord mathrm">c</span><span class="mord mathrm">a</span><span class="mord mathrm">l</span><span class="mord mspace">¬†</span><span class="mord mathrm">s</span><span class="mord mathrm">u</span><span class="mord mathrm">m</span><span class="mord mathrm">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span></span></span></span></span></span></span></p>
<ul>
<li>In total (including 3 synchronizations)</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mrow><mo fence="true">(</mo><mn>2</mn><mrow><mo fence="true">‚åà</mo><mfrac><mrow><mi>n</mi></mrow><mrow><mi>p</mi></mrow></mfrac><mo fence="true">‚åâ</mo></mrow><mo>+</mo><mi>p</mi><mo>‚àí</mo><mn>2</mn><mo fence="true">)</mo></mrow><mo>+</mo><mo>(</mo><mi>p</mi><mo>‚àí</mo><mn>1</mn><mo>)</mo><mi>g</mi><mo>+</mo><mn>3</mn><mi mathvariant="normal">‚Ñì</mi></mrow><annotation encoding="application/x-tex">C = \left(2\left\lceil \frac{n}{p} \right\rceil + p - 2\right) + (p - 1)g + 3\ell
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mrel">=</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord mathrm">2</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">‚åà</span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6860000000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit">p</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">‚åâ</span></span></span><span class="mbin">+</span><span class="mord mathit">p</span><span class="mbin">‚àí</span><span class="mord mathrm">2</span><span class="style-wrap reset-textstyle textstyle uncramped" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mbin">‚àí</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mbin">+</span><span class="mord mathrm">3</span><span class="mord mathrm">‚Ñì</span></span></span></span></span></p>


          <div class="slide-number">14 / 29</div>
        </div>
        <div class="slide" id="15">
          <h1>Example 2: sieve of Eratosthenes</h1>


          <div class="slide-number">15 / 29</div>
        </div>
        <div class="slide" id="16">
          <h1>Sieve of Eratosthenes</h1>
<div class="columns">
  <table id="simple-sieve" class="prime-table"> <tr> <td class="not-prime">0</td><td class="not-prime">1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr><tr> <td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td></tr><tr> <td>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td></tr><tr> <td>30</td><td>31</td><td>32</td><td>33</td><td>34</td><td>35</td><td>36</td><td>37</td><td>38</td><td>39</td></tr><tr> <td>40</td><td>41</td><td>42</td><td>43</td><td>44</td><td>45</td><td>46</td><td>47</td><td>48</td><td>49</td></tr><tr> <td>50</td><td>51</td><td>52</td><td>53</td><td>54</td><td>55</td><td>56</td><td>57</td><td>58</td><td>59</td></tr><tr> <td>60</td><td>61</td><td>62</td><td>63</td><td>64</td><td>65</td><td>66</td><td>67</td><td>68</td><td>69</td></tr><tr> <td>70</td><td>71</td><td>72</td><td>73</td><td>74</td><td>75</td><td>76</td><td>77</td><td>78</td><td>79</td></tr><tr> <td>80</td><td>81</td><td>82</td><td>83</td><td>84</td><td>85</td><td>86</td><td>87</td><td>88</td><td>89</td></tr><tr> <td>90</td><td>91</td><td>92</td><td>93</td><td>94</td><td>95</td><td>96</td><td>97</td><td>98</td><td>99</td></tr></table>
  <div class="snd-col">
    <button id="start-1" class="btn">go</button>
  </div>
</div>


          <div class="slide-number">16 / 29</div>
        </div>
        <div class="slide" id="17">
          <h1>Goal</h1>
<p>Compute the number of primes less than <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>0</mn><mspace width="0.16667em"></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mspace width="0.16667em"></mspace><mn>0</mn><mn>0</mn><mn>0</mn><mspace width="0.16667em"></mspace><mn>0</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">10\,000\,000\,000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mord mspace thinspace"></span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mspace thinspace"></span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mspace thinspace"></span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span> i.e. evaluate</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>œÄ</mi><mo>(</mo><mn>1</mn><msup><mn>0</mn><mrow><mn>1</mn><mn>0</mn></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi(10^{10})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">œÄ</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">‚Äã</span></span>‚Äã</span></span></span><span class="mclose">)</span></span></span></span></span></p>


          <div class="slide-number">17 / 29</div>
        </div>
        <div class="slide" id="18">
          <h1><img class="emoji" draggable="false" alt="üë∂" src="https://twemoji.maxcdn.com/2/svg/1f476.svg"> Version 1</h1>
<pre><code class="language-c++"><span class="hljs-keyword">uint64_t</span> count(<span class="hljs-keyword">uint64_t</span> n)
{
  <span class="hljs-keyword">uint64_t</span> primes = <span class="hljs-number">0</span>;

  <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">uint8_t</span>&gt; is_prime(n, <span class="hljs-literal">true</span>);           <span class="hljs-comment">// Initialize</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">2</span>; k * k &lt; n; ++k)         <span class="hljs-comment">// Sieve</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> m = k * k; m &lt; n; m += k)
        is_prime[m] = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">2</span>; k &lt; n; ++k)             <span class="hljs-comment">// Count</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      ++primes;

  <span class="hljs-keyword">return</span> primes;
}
</code></pre>


          <div class="slide-number">18 / 29</div>
        </div>
        <div class="slide" id="19">
          <h1><img class="emoji" draggable="false" alt="üïê" src="https://twemoji.maxcdn.com/2/svg/1f550.svg"> <span class="nice">96.9</span> seconds.</h1>


          <div class="slide-number">19 / 29</div>
        </div>
        <div class="slide" id="20">
          <h1><img class="emoji" draggable="false" alt="üî•" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"> Version 2</h1>
<pre><code class="language-c++"><span class="hljs-keyword">uint64_t</span> count(<span class="hljs-keyword">uint64_t</span> n)
{
  <span class="hljs-keyword">uint64_t</span> primes = <span class="hljs-number">1</span>;

  <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">uint8_t</span>&gt; is_prime(n, <span class="hljs-literal">true</span>);           <span class="hljs-comment">// Initialize</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">3</span>; k * k &lt; n; k += <span class="hljs-number">2</span>)      <span class="hljs-comment">// Sieve</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> m = k * k; m &lt; n; m += <span class="hljs-number">2</span> * k)
        is_prime[m] = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">3</span>; k &lt; n; k += <span class="hljs-number">2</span>)          <span class="hljs-comment">// Count</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      ++primes;

  <span class="hljs-keyword">return</span> primes;
}
</code></pre>


          <div class="slide-number">20 / 29</div>
        </div>
        <div class="slide" id="21">
          <h1><img class="emoji" draggable="false" alt="üïë" src="https://twemoji.maxcdn.com/2/svg/1f551.svg"> <s>96.9</s> <span class="nice">56.1</span> seconds.</h1>


          <div class="slide-number">21 / 29</div>
        </div>
        <div class="slide" id="22">
          <blockquote>
<p>Why not store odd numbers only?</p>
</blockquote>
<div style="height:50px;"></div>
<table>
<thead>
<tr>
<th style="text-align:center"><code>k</code></th>
<th style="text-align:center"><code>0</code></th>
<th style="text-align:center"><code>1</code></th>
<th style="text-align:center"><code>2</code></th>
<th style="text-align:center"><code>3</code></th>
<th style="text-align:center"><code>4</code></th>
<th style="text-align:center"><code>5</code></th>
<th style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚ãØ</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.31em;"></span><span class="strut bottom" style="height:0.31em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="minner">‚ãØ</span></span></span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span></td>
<td style="text-align:center">1</td>
<td style="text-align:center">3</td>
<td style="text-align:center">5</td>
<td style="text-align:center">7</td>
<td style="text-align:center">9</td>
<td style="text-align:center">11</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>‚ãØ</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.31em;"></span><span class="strut bottom" style="height:0.31em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="minner">‚ãØ</span></span></span></span></td>
</tr>
</tbody>
</table>


          <div class="slide-number">22 / 29</div>
        </div>
        <div class="slide" id="23">
          <h1><img class="emoji" draggable="false" alt="üí•" src="https://twemoji.maxcdn.com/2/svg/1f4a5.svg"> Version <s>2.0</s> 2.1</h1>
<pre><code class="language-c++"><span class="hljs-keyword">uint64_t</span> count(<span class="hljs-keyword">uint64_t</span> n) <span class="hljs-comment">// assume n &gt; 1, even.</span>
{
  <span class="hljs-keyword">uint64_t</span> half = n / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">uint64_t</span> primes = <span class="hljs-number">1</span>;  

  <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">uint8_t</span>&gt; is_prime(half, <span class="hljs-literal">true</span>);              <span class="hljs-comment">// Initialize</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">1</span>; <span class="hljs-number">2</span> * k * (k + <span class="hljs-number">1</span>) &lt; half; ++k)  <span class="hljs-comment">// Sieve</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> m = <span class="hljs-number">2</span> * k * (k + <span class="hljs-number">1</span>); m &lt; half; m += <span class="hljs-number">2</span> * k + <span class="hljs-number">1</span>)
        is_prime[m] = <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint64_t</span> k = <span class="hljs-number">1</span>; k &lt; half; ++k)                <span class="hljs-comment">// Count</span>
    <span class="hljs-keyword">if</span> (is_prime[k])
      ++primes;

  <span class="hljs-keyword">return</span> primes;
}
</code></pre>


          <div class="slide-number">23 / 29</div>
        </div>
        <div class="slide" id="24">
          <h1><img class="emoji" draggable="false" alt="üïí" src="https://twemoji.maxcdn.com/2/svg/1f552.svg"> <s>96.9</s> <s>56.1</s> <span class="nice">47.5</span> seconds.</h1>
<ul>
<li>Why is this faster?</li>
</ul>


          <div class="slide-number">24 / 29</div>
        </div>
        <div class="slide" id="25">
          <h1>Segmented sieve</h1>
<div class="columns">
  <table id="segmented-sieve" class="prime-table"> <tr> <td class="not-prime">0</td><td class="not-prime">1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr><tr> <td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td></tr><tr> <td>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td></tr><tr> <td>30</td><td>31</td><td>32</td><td>33</td><td>34</td><td>35</td><td>36</td><td>37</td><td>38</td><td>39</td></tr><tr> <td>40</td><td>41</td><td>42</td><td>43</td><td>44</td><td>45</td><td>46</td><td>47</td><td>48</td><td>49</td></tr><tr> <td>50</td><td>51</td><td>52</td><td>53</td><td>54</td><td>55</td><td>56</td><td>57</td><td>58</td><td>59</td></tr><tr> <td>60</td><td>61</td><td>62</td><td>63</td><td>64</td><td>65</td><td>66</td><td>67</td><td>68</td><td>69</td></tr><tr> <td>70</td><td>71</td><td>72</td><td>73</td><td>74</td><td>75</td><td>76</td><td>77</td><td>78</td><td>79</td></tr><tr> <td>80</td><td>81</td><td>82</td><td>83</td><td>84</td><td>85</td><td>86</td><td>87</td><td>88</td><td>89</td></tr><tr> <td>90</td><td>91</td><td>92</td><td>93</td><td>94</td><td>95</td><td>96</td><td>97</td><td>98</td><td>99</td></tr></table>
  <div class="snd-col">
    <button id="start-2" class="btn">go</button>
  </div>
</div>


          <div class="slide-number">25 / 29</div>
        </div>
        <div class="slide" id="26">
          <h1><img class="emoji" draggable="false" alt="üöÄ" src="https://twemoji.maxcdn.com/2/svg/1f680.svg"> Version 3</h1>
<pre><code class="language-c++"><span class="hljs-keyword">uint64_t</span> count(<span class="hljs-keyword">uint64_t</span> n)
{
  <span class="hljs-comment">// Too many lines of code</span>
}
</code></pre>


          <div class="slide-number">26 / 29</div>
        </div>
        <div class="slide" id="27">
          <h1><img class="emoji" draggable="false" alt="üïì" src="https://twemoji.maxcdn.com/2/svg/1f553.svg"> <s>96.9</s> <s>56.1</s> <s>47.5</s> <span class="nice">11.7</span> seconds.</h1>
<img src="graph2.svg">


          <div class="slide-number">27 / 29</div>
        </div>
        <div class="slide" id="28">
          <h1>Conclusion</h1>
<ul>
<li>Understand the architecture</li>
<li>9 women can‚Äôt get 1 baby in a month</li>
<li>Don‚Äôt randomly access random access memory</li>
<li>Use data that is physically nearby</li>
<li>‚Ä¶</li>
</ul>


          <div class="slide-number">28 / 29</div>
        </div>
    </div>

    <script src="./script.js"></script>
  </body>
  </html>